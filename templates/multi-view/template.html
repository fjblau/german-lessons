<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- CUSTOMIZATION POINT: Change the title to match your topic -->
  <title>German B1 Multi-View Reference ‚Äî Template</title>
  
  <!-- Google Fonts: DM Serif Display (serif), IBM Plex Sans (sans), JetBrains Mono (mono) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display:ital@0;1&family=IBM+Plex+Sans:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  
  <style>
    /* ========================================
       THEME: Dark/Modern (Multi-View Apps)
       For vocabulary drilling and reference lists
       ======================================== */
    
    :root {
      /* Base Colors */
      --bg: #0e0f13;
      --surface: #16171d;
      --surface-2: #1e1f27;
      --surface-3: #262731;
      
      /* Border Colors */
      --border: #2a2b36;
      --border-light: #35364280;
      
      /* Text Colors */
      --text: #e8e6e3;
      --text-dim: #8a8997;
      --text-muted: #5c5b6b;
      
      /* CEFR Level Accent Colors
         CUSTOMIZATION POINT: These colors highlight different CEFR levels (A1-C2) */
      --accent-a1: #4fc3f7;
      --accent-a2: #81c784;
      --accent-b1: #ffb74d;
      --accent-b2: #ef5350;
      --accent-c1: #ce93d8;
      --accent-c2: #f48fb1;
      
      /* Glow Effects for CEFR badges */
      --glow-a1: rgba(79,195,247,.12);
      --glow-a2: rgba(129,199,132,.12);
      --glow-b1: rgba(255,183,77,.12);
      --glow-b2: rgba(239,83,80,.12);
      --glow-c1: rgba(206,147,216,.12);
      --glow-c2: rgba(244,143,177,.12);
      
      /* Feedback Colors */
      --correct: #66bb6a;
      --incorrect: #ef5350;
      
      /* Shapes */
      --card-radius: 16px;
      
      /* Typography */
      --font-serif: 'DM Serif Display', Georgia, serif;
      --font-sans: 'IBM Plex Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      --font-mono: 'JetBrains Mono', 'Courier New', monospace;
    }
    
    /* ========================================
       BASE STYLES
       ======================================== */
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: var(--font-sans);
      background: var(--bg);
      color: var(--text);
      line-height: 1.6;
      padding: 0;
      min-height: 100vh;
    }
    
    /* ========================================
       HEADER
       ======================================== */
    
    header {
      background: var(--surface);
      border-bottom: 1px solid var(--border);
      padding: 2rem 1.5rem 1.5rem;
      text-align: center;
    }
    
    .header-eyebrow {
      font-size: 11px;
      font-weight: 600;
      letter-spacing: 3px;
      text-transform: uppercase;
      color: var(--text-dim);
      margin-bottom: 0.5rem;
    }
    
    h1 {
      font-family: var(--font-serif);
      font-size: clamp(28px, 5vw, 44px);
      font-weight: 400;
      line-height: 1.15;
      color: var(--text);
      margin-bottom: 0.5rem;
    }
    
    .subtitle {
      font-size: 14px;
      color: var(--text-dim);
      font-weight: 400;
    }
    
    /* ========================================
       TAB NAVIGATION
       ======================================== */
    
    .tab-nav {
      display: flex;
      justify-content: center;
      gap: 0.5rem;
      padding: 1.5rem 1rem 0;
      background: var(--bg);
      border-bottom: 1px solid var(--border);
      position: sticky;
      top: 0;
      z-index: 100;
    }
    
    .tab-btn {
      background: var(--surface);
      border: 1px solid var(--border);
      color: var(--text-dim);
      padding: 0.75rem 1.75rem;
      border-radius: 12px 12px 0 0;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s ease;
      font-family: var(--font-sans);
    }
    
    .tab-btn:hover:not(.active) {
      background: var(--surface-2);
      color: var(--text);
    }
    
    .tab-btn.active {
      background: var(--bg);
      border-bottom-color: var(--bg);
      color: var(--text);
      font-weight: 600;
    }
    
    /* ========================================
       LEVEL FILTER
       ======================================== */
    
    .level-filter {
      display: flex;
      justify-content: center;
      gap: 0.5rem;
      padding: 1.5rem 1rem;
      background: var(--bg);
      flex-wrap: wrap;
    }
    
    .level-btn {
      background: var(--surface);
      border: 1px solid var(--border);
      color: var(--text-dim);
      padding: 0.5rem 1rem;
      border-radius: 8px;
      font-size: 13px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s ease;
      font-family: var(--font-mono);
    }
    
    .level-btn:hover:not(.active) {
      background: var(--surface-2);
      border-color: var(--border-light);
    }
    
    .level-btn.active {
      font-weight: 600;
      transform: translateY(-2px);
    }
    
    /* CUSTOMIZATION POINT: Level button colors based on CEFR level */
    .level-btn.active[data-level="ALL"] {
      background: var(--surface-3);
      border-color: var(--text-dim);
      color: var(--text);
    }
    .level-btn.active[data-level="A1"] {
      background: var(--glow-a1);
      border-color: var(--accent-a1);
      color: var(--accent-a1);
    }
    .level-btn.active[data-level="A2"] {
      background: var(--glow-a2);
      border-color: var(--accent-a2);
      color: var(--accent-a2);
    }
    .level-btn.active[data-level="B1"] {
      background: var(--glow-b1);
      border-color: var(--accent-b1);
      color: var(--accent-b1);
    }
    .level-btn.active[data-level="B2"] {
      background: var(--glow-b2);
      border-color: var(--accent-b2);
      color: var(--accent-b2);
    }
    .level-btn.active[data-level="C1"] {
      background: var(--glow-c1);
      border-color: var(--accent-c1);
      color: var(--accent-c1);
    }
    .level-btn.active[data-level="C2"] {
      background: var(--glow-c2);
      border-color: var(--accent-c2);
      color: var(--accent-c2);
    }
    
    /* ========================================
       VIEW CONTAINERS
       ======================================== */
    
    .view {
      display: none;
      padding: 2rem 1rem;
      max-width: 1200px;
      margin: 0 auto;
    }
    
    .view.active {
      display: block;
    }
    
    /* ========================================
       BROWSE VIEW - Reference Table
       ======================================== */
    
    .browse-table {
      width: 100%;
      border-collapse: collapse;
      background: var(--surface);
      border-radius: var(--card-radius);
      overflow: hidden;
    }
    
    .browse-table thead {
      background: var(--surface-2);
      border-bottom: 1px solid var(--border);
    }
    
    .browse-table th {
      padding: 1rem;
      text-align: left;
      font-size: 12px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 1px;
      color: var(--text-dim);
    }
    
    .browse-table td {
      padding: 1rem;
      border-bottom: 1px solid var(--border);
      font-size: 15px;
    }
    
    .browse-table tr:last-child td {
      border-bottom: none;
    }
    
    .browse-table tbody tr:hover {
      background: var(--surface-2);
    }
    
    /* CUSTOMIZATION POINT: First column (term) styling */
    .browse-table .col-term {
      font-family: var(--font-serif);
      font-size: 18px;
      color: var(--text);
      font-weight: 400;
    }
    
    .browse-table .col-definition {
      color: var(--text-dim);
    }
    
    .browse-table .col-level {
      font-family: var(--font-mono);
      font-size: 11px;
      font-weight: 600;
    }
    
    .level-badge {
      display: inline-block;
      padding: 0.25rem 0.5rem;
      border-radius: 6px;
      font-family: var(--font-mono);
      font-size: 11px;
      font-weight: 600;
    }
    
    .level-badge.a1 { background: var(--glow-a1); color: var(--accent-a1); }
    .level-badge.a2 { background: var(--glow-a2); color: var(--accent-a2); }
    .level-badge.b1 { background: var(--glow-b1); color: var(--accent-b1); }
    .level-badge.b2 { background: var(--glow-b2); color: var(--accent-b2); }
    .level-badge.c1 { background: var(--glow-c1); color: var(--accent-c1); }
    .level-badge.c2 { background: var(--glow-c2); color: var(--accent-c2); }
    
    /* ========================================
       FLASHCARD VIEW
       ======================================== */
    
    .flashcard-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 400px;
    }
    
    .flashcard {
      width: 100%;
      max-width: 600px;
      height: 350px;
      perspective: 1000px;
      margin-bottom: 2rem;
      cursor: pointer;
    }
    
    .flashcard-inner {
      position: relative;
      width: 100%;
      height: 100%;
      transition: transform 0.6s;
      transform-style: preserve-3d;
    }
    
    .flashcard.flipped .flashcard-inner {
      transform: rotateY(180deg);
    }
    
    .flashcard-front,
    .flashcard-back {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--card-radius);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 2rem;
      text-align: center;
    }
    
    .flashcard-back {
      transform: rotateY(180deg);
    }
    
    .flashcard-label {
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 2px;
      color: var(--text-dim);
      margin-bottom: 1.5rem;
    }
    
    /* CUSTOMIZATION POINT: Adjust font sizes for your content type */
    .flashcard-term {
      font-family: var(--font-serif);
      font-size: 42px;
      color: var(--text);
      margin-bottom: 1rem;
    }
    
    .flashcard-definition {
      font-size: 20px;
      color: var(--text-dim);
      line-height: 1.5;
    }
    
    .flashcard-example {
      font-size: 14px;
      color: var(--text-muted);
      font-style: italic;
      margin-top: 1.5rem;
    }
    
    .flashcard-controls {
      display: flex;
      gap: 1rem;
      margin-top: 1rem;
    }
    
    .flashcard-nav-btn {
      background: var(--surface-2);
      border: 1px solid var(--border);
      color: var(--text);
      padding: 0.75rem 2rem;
      border-radius: 10px;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s ease;
      font-family: var(--font-sans);
    }
    
    .flashcard-nav-btn:hover:not(:disabled) {
      background: var(--surface-3);
      transform: translateY(-2px);
    }
    
    .flashcard-nav-btn:disabled {
      opacity: 0.3;
      cursor: not-allowed;
    }
    
    .flashcard-counter {
      font-size: 13px;
      color: var(--text-dim);
      font-family: var(--font-mono);
      margin-top: 1.5rem;
    }
    
    .flashcard-hint {
      font-size: 12px;
      color: var(--text-muted);
      margin-top: 1rem;
      font-style: italic;
    }
    
    /* ========================================
       QUIZ VIEW
       ======================================== */
    
    .quiz-container {
      max-width: 700px;
      margin: 0 auto;
    }
    
    .quiz-controls {
      display: flex;
      justify-content: center;
      gap: 1rem;
      margin-bottom: 2rem;
      flex-wrap: wrap;
    }
    
    .quiz-type-btn {
      background: var(--surface);
      border: 1px solid var(--border);
      color: var(--text-dim);
      padding: 0.6rem 1.5rem;
      border-radius: 10px;
      font-size: 13px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s ease;
      font-family: var(--font-sans);
    }
    
    .quiz-type-btn:hover:not(.active) {
      background: var(--surface-2);
    }
    
    .quiz-type-btn.active {
      background: var(--accent-b1);
      color: var(--bg);
      border-color: var(--accent-b1);
      font-weight: 600;
    }
    
    .quiz-stats {
      display: flex;
      justify-content: center;
      gap: 2rem;
      margin-bottom: 2rem;
      padding: 1.5rem;
      background: var(--surface);
      border-radius: var(--card-radius);
    }
    
    .quiz-stat {
      text-align: center;
    }
    
    .quiz-stat-label {
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 1px;
      color: var(--text-dim);
      margin-bottom: 0.5rem;
    }
    
    .quiz-stat-value {
      font-size: 28px;
      font-weight: 700;
      font-family: var(--font-mono);
    }
    
    .quiz-stat-value.correct { color: var(--correct); }
    .quiz-stat-value.incorrect { color: var(--incorrect); }
    .quiz-stat-value.streak { color: var(--accent-b1); }
    
    .quiz-card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--card-radius);
      padding: 3rem 2rem;
      text-align: center;
      margin-bottom: 2rem;
    }
    
    .quiz-instruction {
      font-size: 13px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 1.5px;
      color: var(--text-dim);
      margin-bottom: 2rem;
    }
    
    /* CUSTOMIZATION POINT: Adjust quiz prompt styling for your content */
    .quiz-prompt {
      font-family: var(--font-serif);
      font-size: 36px;
      color: var(--text);
      margin-bottom: 2rem;
    }
    
    .quiz-input {
      width: 100%;
      max-width: 400px;
      background: var(--surface-2);
      border: 2px solid var(--border);
      border-radius: 10px;
      padding: 1rem 1.5rem;
      font-size: 18px;
      color: var(--text);
      font-family: var(--font-mono);
      text-align: center;
      transition: all 0.2s ease;
    }
    
    .quiz-input:focus {
      outline: none;
      border-color: var(--accent-b1);
      background: var(--surface-3);
    }
    
    .quiz-input.correct {
      border-color: var(--correct);
      background: rgba(102, 187, 106, 0.1);
    }
    
    .quiz-input.incorrect {
      border-color: var(--incorrect);
      background: rgba(239, 83, 80, 0.1);
    }
    
    .quiz-feedback {
      margin-top: 1.5rem;
      padding: 1rem;
      border-radius: 10px;
      font-size: 15px;
      display: none;
    }
    
    .quiz-feedback.show {
      display: block;
    }
    
    .quiz-feedback.correct {
      background: rgba(102, 187, 106, 0.1);
      color: var(--correct);
      border-left: 4px solid var(--correct);
    }
    
    .quiz-feedback.incorrect {
      background: rgba(239, 83, 80, 0.1);
      color: var(--incorrect);
      border-left: 4px solid var(--incorrect);
    }
    
    .quiz-next-btn {
      background: var(--accent-b1);
      border: none;
      color: var(--bg);
      padding: 0.85rem 2.5rem;
      border-radius: 10px;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
      font-family: var(--font-sans);
      margin-top: 1.5rem;
      display: none;
    }
    
    .quiz-next-btn.show {
      display: inline-block;
    }
    
    .quiz-next-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(255, 183, 77, 0.3);
    }
    
    /* ========================================
       RESPONSIVE DESIGN
       ======================================== */
    
    @media (max-width: 768px) {
      header {
        padding: 1.5rem 1rem 1rem;
      }
      
      h1 {
        font-size: 28px;
      }
      
      .tab-nav {
        gap: 0.25rem;
        padding: 1rem 0.5rem 0;
      }
      
      .tab-btn {
        padding: 0.6rem 1rem;
        font-size: 13px;
      }
      
      .level-filter {
        padding: 1rem 0.5rem;
        gap: 0.4rem;
      }
      
      .level-btn {
        padding: 0.4rem 0.75rem;
        font-size: 12px;
      }
      
      .view {
        padding: 1.5rem 0.75rem;
      }
      
      .browse-table {
        font-size: 14px;
      }
      
      .browse-table th,
      .browse-table td {
        padding: 0.75rem 0.5rem;
      }
      
      .browse-table .col-term {
        font-size: 16px;
      }
      
      .flashcard {
        height: 300px;
      }
      
      .flashcard-term {
        font-size: 32px;
      }
      
      .flashcard-definition {
        font-size: 18px;
      }
      
      .quiz-prompt {
        font-size: 28px;
      }
      
      .quiz-stats {
        gap: 1rem;
        padding: 1rem;
      }
      
      .quiz-stat-value {
        font-size: 24px;
      }
    }
    
    /* ========================================
       UTILITY CLASSES
       ======================================== */
    
    .hidden {
      display: none !important;
    }
    
    .text-center {
      text-align: center;
    }
    
    .mt-2 {
      margin-top: 2rem;
    }
  </style>
</head>
<body>
  <!-- ========================================
       HEADER SECTION
       CUSTOMIZATION POINT: Update title, subtitle, and eyebrow
       ======================================== -->
  <header>
    <div class="header-eyebrow">German B1 ‚Äî Reference App</div>
    <h1>Sample Topic: Strong Verbs</h1>
    <p class="subtitle">Browse ¬∑ Practice ¬∑ Test Your Knowledge</p>
  </header>
  
  <!-- ========================================
       TAB NAVIGATION
       Three views: Browse, Flashcards, Quiz
       ======================================== -->
  <nav class="tab-nav">
    <button class="tab-btn active" data-view="browse">üìö Browse</button>
    <button class="tab-btn" data-view="flashcards">üÉè Flashcards</button>
    <button class="tab-btn" data-view="quiz">‚úèÔ∏è Quiz</button>
  </nav>
  
  <!-- ========================================
       LEVEL FILTER (CEFR Levels)
       CUSTOMIZATION POINT: Adjust levels based on your content
       ======================================== -->
  <div class="level-filter">
    <button class="level-btn active" data-level="ALL">ALL</button>
    <button class="level-btn" data-level="A1">A1</button>
    <button class="level-btn" data-level="A2">A2</button>
    <button class="level-btn" data-level="B1">B1</button>
    <button class="level-btn" data-level="B2">B2</button>
    <button class="level-btn" data-level="C1">C1</button>
    <button class="level-btn" data-level="C2">C2</button>
  </div>
  
  <!-- ========================================
       VIEW 1: BROWSE (Reference Table)
       Displays all items in a sortable table
       ======================================== -->
  <div class="view active" id="browse-view">
    <table class="browse-table">
      <thead>
        <tr>
          <!-- CUSTOMIZATION POINT: Update table headers for your content type -->
          <th class="col-term">Infinitiv</th>
          <th class="col-definition">Pr√§sens (3rd)</th>
          <th class="col-definition">Pr√§teritum</th>
          <th class="col-definition">Perfekt</th>
          <th class="col-level">Level</th>
        </tr>
      </thead>
      <tbody id="browse-table-body">
        <!-- Table rows will be populated by JavaScript -->
      </tbody>
    </table>
  </div>
  
  <!-- ========================================
       VIEW 2: FLASHCARDS
       Interactive flip cards for memorization
       ======================================== -->
  <div class="view" id="flashcards-view">
    <div class="flashcard-container">
      <div class="flashcard" id="flashcard">
        <div class="flashcard-inner">
          <!-- Front: Shows the term/question -->
          <div class="flashcard-front">
            <div class="flashcard-label">Infinitiv</div>
            <div class="flashcard-term" id="flashcard-front-text">gehen</div>
          </div>
          <!-- Back: Shows the answer/definition -->
          <div class="flashcard-back">
            <div class="flashcard-label">Konjugation</div>
            <div class="flashcard-definition" id="flashcard-back-text">
              geht ¬∑ ging ¬∑ ist gegangen
            </div>
            <div class="flashcard-example" id="flashcard-example">
              Click or press Space to flip
            </div>
          </div>
        </div>
      </div>
      
      <div class="flashcard-controls">
        <button class="flashcard-nav-btn" id="prev-card">‚Üê Previous</button>
        <button class="flashcard-nav-btn" id="next-card">Next ‚Üí</button>
      </div>
      
      <div class="flashcard-counter" id="flashcard-counter">1 / 10</div>
      <div class="flashcard-hint">üí° Click card or press Space to flip ¬∑ Arrow keys to navigate</div>
    </div>
  </div>
  
  <!-- ========================================
       VIEW 3: QUIZ
       Active recall testing with feedback
       ======================================== -->
  <div class="view" id="quiz-view">
    <div class="quiz-container">
      <!-- Quiz Type Selection -->
      <!-- CUSTOMIZATION POINT: Adjust quiz types based on your content -->
      <div class="quiz-controls">
        <button class="quiz-type-btn active" data-quiz-type="prateritum">Pr√§teritum</button>
        <button class="quiz-type-btn" data-quiz-type="perfekt">Perfekt</button>
        <button class="quiz-type-btn" data-quiz-type="mixed">Mixed</button>
      </div>
      
      <!-- Quiz Stats -->
      <div class="quiz-stats">
        <div class="quiz-stat">
          <div class="quiz-stat-label">Correct</div>
          <div class="quiz-stat-value correct" id="quiz-correct">0</div>
        </div>
        <div class="quiz-stat">
          <div class="quiz-stat-label">Incorrect</div>
          <div class="quiz-stat-value incorrect" id="quiz-incorrect">0</div>
        </div>
        <div class="quiz-stat">
          <div class="quiz-stat-label">Streak</div>
          <div class="quiz-stat-value streak" id="quiz-streak">0</div>
        </div>
      </div>
      
      <!-- Quiz Question Card -->
      <div class="quiz-card">
        <div class="quiz-instruction" id="quiz-instruction">Geben Sie das Pr√§teritum ein</div>
        <div class="quiz-prompt" id="quiz-prompt">gehen</div>
        <input 
          type="text" 
          class="quiz-input" 
          id="quiz-input" 
          placeholder="Ihre Antwort..."
          autocomplete="off"
        >
        <div class="quiz-feedback" id="quiz-feedback"></div>
        <button class="quiz-next-btn" id="quiz-next-btn">Next Question ‚Üí</button>
      </div>
    </div>
  </div>

  <script>
    /* ========================================
       DATA SECTION
       CUSTOMIZATION POINT: Replace with your own content
       
       This template uses verb conjugation as an example.
       You can adapt this for:
       - Vocabulary items (word, definition, example, level)
       - Noun declensions (article, singular, plural, level)
       - Phrases (German, English, context, level)
       - Any other reference material
       ======================================== */
    
    const dataItems = [
      // CUSTOMIZATION POINT: Verb conjugation example
      // Schema: { inf, pres, pret, perf, level }
      { inf: "gehen", pres: "geht", pret: "ging", perf: "ist gegangen", level: "A1" },
      { inf: "sehen", pres: "sieht", pret: "sah", perf: "hat gesehen", level: "A1" },
      { inf: "kommen", pres: "kommt", pret: "kam", perf: "ist gekommen", level: "A1" },
      { inf: "nehmen", pres: "nimmt", pret: "nahm", perf: "hat genommen", level: "A1" },
      { inf: "geben", pres: "gibt", pret: "gab", perf: "hat gegeben", level: "A1" },
      
      { inf: "sprechen", pres: "spricht", pret: "sprach", perf: "hat gesprochen", level: "A2" },
      { inf: "schreiben", pres: "schreibt", pret: "schrieb", perf: "hat geschrieben", level: "A2" },
      { inf: "lesen", pres: "liest", pret: "las", perf: "hat gelesen", level: "A2" },
      { inf: "fahren", pres: "f√§hrt", pret: "fuhr", perf: "hat/ist gefahren", level: "A2" },
      { inf: "essen", pres: "isst", pret: "a√ü", perf: "hat gegessen", level: "A2" },
      
      { inf: "beginnen", pres: "beginnt", pret: "begann", perf: "hat begonnen", level: "B1" },
      { inf: "empfehlen", pres: "empfiehlt", pret: "empfahl", perf: "hat empfohlen", level: "B1" },
      { inf: "verstehen", pres: "versteht", pret: "verstand", perf: "hat verstanden", level: "B1" },
      { inf: "treffen", pres: "trifft", pret: "traf", perf: "hat getroffen", level: "B1" },
      { inf: "vergessen", pres: "vergisst", pret: "verga√ü", perf: "hat vergessen", level: "B1" },
      
      { inf: "bewerben", pres: "bewirbt", pret: "bewarb", perf: "hat beworben", level: "B2" },
      { inf: "verschwinden", pres: "verschwindet", pret: "verschwand", perf: "ist verschwunden", level: "B2" },
      { inf: "gelingen", pres: "gelingt", pret: "gelang", perf: "ist gelungen", level: "B2" },
    ];
    
    /* ========================================
       STATE MANAGEMENT
       Tracks current view, level filter, and quiz/flashcard state
       ======================================== */
    
    const state = {
      currentView: 'browse',
      activeLevel: 'ALL',
      flashcardState: {
        currentIndex: 0,
        isFlipped: false,
        filteredItems: []
      },
      quizState: {
        quizType: 'prateritum',
        correct: 0,
        incorrect: 0,
        streak: 0,
        currentQuestionIndex: 0,
        filteredItems: [],
        isAnswered: false
      }
    };
    
    /* ========================================
       UTILITY FUNCTIONS
       ======================================== */
    
    // Filter items by CEFR level
    function getFilteredItems() {
      if (state.activeLevel === 'ALL') {
        return dataItems;
      }
      return dataItems.filter(item => item.level === state.activeLevel);
    }
    
    // Shuffle array (Fisher-Yates algorithm)
    function shuffleArray(array) {
      const shuffled = [...array];
      for (let i = shuffled.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
      }
      return shuffled;
    }
    
    /* ========================================
       TAB NAVIGATION
       Switch between Browse, Flashcards, and Quiz views
       ======================================== */
    
    document.querySelectorAll('.tab-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        const viewName = btn.dataset.view;
        
        // Update tab buttons
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        
        // Update views
        document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
        document.getElementById(`${viewName}-view`).classList.add('active');
        
        // Update state
        state.currentView = viewName;
        
        // Initialize view
        if (viewName === 'browse') {
          renderBrowseTable();
        } else if (viewName === 'flashcards') {
          initFlashcards();
        } else if (viewName === 'quiz') {
          initQuiz();
        }
      });
    });
    
    /* ========================================
       LEVEL FILTER
       Filter content by CEFR level
       ======================================== */
    
    document.querySelectorAll('.level-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        const level = btn.dataset.level;
        
        // Update buttons
        document.querySelectorAll('.level-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        
        // Update state
        state.activeLevel = level;
        
        // Re-render current view
        if (state.currentView === 'browse') {
          renderBrowseTable();
        } else if (state.currentView === 'flashcards') {
          initFlashcards();
        } else if (state.currentView === 'quiz') {
          initQuiz();
        }
      });
    });
    
    /* ========================================
       BROWSE VIEW - Reference Table
       ======================================== */
    
    function renderBrowseTable() {
      const tbody = document.getElementById('browse-table-body');
      const items = getFilteredItems();
      
      if (items.length === 0) {
        tbody.innerHTML = `
          <tr>
            <td colspan="5" class="text-center" style="padding: 2rem; color: var(--text-dim);">
              No items found for level ${state.activeLevel}
            </td>
          </tr>
        `;
        return;
      }
      
      tbody.innerHTML = items.map(item => `
        <tr>
          <td class="col-term">${item.inf}</td>
          <td class="col-definition">${item.pres}</td>
          <td class="col-definition">${item.pret}</td>
          <td class="col-definition">${item.perf}</td>
          <td class="col-level">
            <span class="level-badge ${item.level.toLowerCase()}">${item.level}</span>
          </td>
        </tr>
      `).join('');
    }
    
    /* ========================================
       FLASHCARDS VIEW
       Interactive flip cards with keyboard navigation
       ======================================== */
    
    function initFlashcards() {
      const items = getFilteredItems();
      
      if (items.length === 0) {
        document.getElementById('flashcard-front-text').textContent = 'No items';
        document.getElementById('flashcard-back-text').textContent = `No items for level ${state.activeLevel}`;
        document.getElementById('flashcard-counter').textContent = '0 / 0';
        return;
      }
      
      state.flashcardState.filteredItems = shuffleArray(items);
      state.flashcardState.currentIndex = 0;
      state.flashcardState.isFlipped = false;
      
      renderFlashcard();
    }
    
    function renderFlashcard() {
      const items = state.flashcardState.filteredItems;
      const index = state.flashcardState.currentIndex;
      
      if (items.length === 0) return;
      
      const item = items[index];
      const flashcard = document.getElementById('flashcard');
      
      // Reset flip state
      flashcard.classList.remove('flipped');
      state.flashcardState.isFlipped = false;
      
      // CUSTOMIZATION POINT: Update flashcard content rendering
      document.getElementById('flashcard-front-text').textContent = item.inf;
      document.getElementById('flashcard-back-text').textContent = 
        `${item.pres} ¬∑ ${item.pret} ¬∑ ${item.perf}`;
      document.getElementById('flashcard-example').textContent = 
        `Level: ${item.level}`;
      
      // Update counter
      document.getElementById('flashcard-counter').textContent = 
        `${index + 1} / ${items.length}`;
      
      // Update navigation buttons
      document.getElementById('prev-card').disabled = index === 0;
      document.getElementById('next-card').disabled = index === items.length - 1;
    }
    
    // Flashcard flip
    document.getElementById('flashcard').addEventListener('click', () => {
      const flashcard = document.getElementById('flashcard');
      flashcard.classList.toggle('flipped');
      state.flashcardState.isFlipped = !state.flashcardState.isFlipped;
    });
    
    // Flashcard navigation
    document.getElementById('prev-card').addEventListener('click', () => {
      if (state.flashcardState.currentIndex > 0) {
        state.flashcardState.currentIndex--;
        renderFlashcard();
      }
    });
    
    document.getElementById('next-card').addEventListener('click', () => {
      const maxIndex = state.flashcardState.filteredItems.length - 1;
      if (state.flashcardState.currentIndex < maxIndex) {
        state.flashcardState.currentIndex++;
        renderFlashcard();
      }
    });
    
    // Keyboard navigation for flashcards
    document.addEventListener('keydown', (e) => {
      if (state.currentView !== 'flashcards') return;
      
      if (e.code === 'Space') {
        e.preventDefault();
        document.getElementById('flashcard').click();
      } else if (e.code === 'ArrowLeft') {
        document.getElementById('prev-card').click();
      } else if (e.code === 'ArrowRight') {
        document.getElementById('next-card').click();
      }
    });
    
    /* ========================================
       QUIZ VIEW
       Active recall testing with immediate feedback
       ======================================== */
    
    function initQuiz() {
      const items = getFilteredItems();
      
      if (items.length === 0) {
        document.getElementById('quiz-prompt').textContent = 'No items available';
        document.getElementById('quiz-input').disabled = true;
        return;
      }
      
      state.quizState.filteredItems = shuffleArray(items);
      state.quizState.currentQuestionIndex = 0;
      state.quizState.isAnswered = false;
      
      // Don't reset scores when re-initializing with new level
      // state.quizState.correct = 0;
      // state.quizState.incorrect = 0;
      // state.quizState.streak = 0;
      
      renderQuizQuestion();
    }
    
    function renderQuizQuestion() {
      const items = state.quizState.filteredItems;
      const index = state.quizState.currentQuestionIndex;
      
      if (items.length === 0 || index >= items.length) {
        // Loop back to start
        state.quizState.currentQuestionIndex = 0;
        state.quizState.filteredItems = shuffleArray(state.quizState.filteredItems);
        if (items.length === 0) return;
      }
      
      const item = items[state.quizState.currentQuestionIndex];
      
      // CUSTOMIZATION POINT: Update quiz question based on quiz type
      const quizType = state.quizState.quizType;
      
      if (quizType === 'prateritum') {
        document.getElementById('quiz-instruction').textContent = 'Geben Sie das Pr√§teritum ein';
        document.getElementById('quiz-prompt').textContent = item.inf;
      } else if (quizType === 'perfekt') {
        document.getElementById('quiz-instruction').textContent = 'Geben Sie das Perfekt ein';
        document.getElementById('quiz-prompt').textContent = item.inf;
      } else if (quizType === 'mixed') {
        const types = ['prateritum', 'perfekt'];
        const randomType = types[Math.floor(Math.random() * types.length)];
        if (randomType === 'prateritum') {
          document.getElementById('quiz-instruction').textContent = 'Pr√§teritum';
          document.getElementById('quiz-prompt').textContent = item.inf;
        } else {
          document.getElementById('quiz-instruction').textContent = 'Perfekt';
          document.getElementById('quiz-prompt').textContent = item.inf;
        }
      }
      
      // Reset input
      const input = document.getElementById('quiz-input');
      input.value = '';
      input.disabled = false;
      input.classList.remove('correct', 'incorrect');
      input.focus();
      
      // Hide feedback and next button
      document.getElementById('quiz-feedback').classList.remove('show', 'correct', 'incorrect');
      document.getElementById('quiz-next-btn').classList.remove('show');
      
      state.quizState.isAnswered = false;
    }
    
    function checkQuizAnswer() {
      if (state.quizState.isAnswered) return;
      
      const items = state.quizState.filteredItems;
      const item = items[state.quizState.currentQuestionIndex];
      const input = document.getElementById('quiz-input');
      const userAnswer = input.value.trim().toLowerCase();
      
      if (!userAnswer) return;
      
      // CUSTOMIZATION POINT: Answer validation logic
      let correctAnswer = '';
      const quizType = state.quizState.quizType;
      const instruction = document.getElementById('quiz-instruction').textContent;
      
      if (instruction.includes('Pr√§teritum')) {
        correctAnswer = item.pret.toLowerCase();
      } else if (instruction.includes('Perfekt')) {
        correctAnswer = item.perf.toLowerCase();
      }
      
      // Check if answer is correct (handle multiple possible answers)
      const correctAnswers = correctAnswer.split('/').map(a => a.trim());
      const isCorrect = correctAnswers.some(ans => userAnswer === ans);
      
      // Update stats
      if (isCorrect) {
        state.quizState.correct++;
        state.quizState.streak++;
      } else {
        state.quizState.incorrect++;
        state.quizState.streak = 0;
      }
      
      // Update UI
      input.classList.add(isCorrect ? 'correct' : 'incorrect');
      input.disabled = true;
      state.quizState.isAnswered = true;
      
      // Show feedback
      const feedback = document.getElementById('quiz-feedback');
      feedback.textContent = isCorrect 
        ? `‚úì Richtig!`
        : `‚úó Incorrect. Correct answer: ${correctAnswer}`;
      feedback.classList.add('show', isCorrect ? 'correct' : 'incorrect');
      
      // Show next button
      document.getElementById('quiz-next-btn').classList.add('show');
      
      // Update stats display
      document.getElementById('quiz-correct').textContent = state.quizState.correct;
      document.getElementById('quiz-incorrect').textContent = state.quizState.incorrect;
      document.getElementById('quiz-streak').textContent = state.quizState.streak;
    }
    
    // Quiz type selection
    document.querySelectorAll('.quiz-type-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        const quizType = btn.dataset.quizType;
        
        // Update buttons
        document.querySelectorAll('.quiz-type-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        
        // Update state
        state.quizState.quizType = quizType;
        
        // Reset quiz
        state.quizState.currentQuestionIndex = 0;
        state.quizState.filteredItems = shuffleArray(state.quizState.filteredItems);
        renderQuizQuestion();
      });
    });
    
    // Quiz input handling
    document.getElementById('quiz-input').addEventListener('keydown', (e) => {
      if (e.key === 'Enter') {
        e.preventDefault();
        if (!state.quizState.isAnswered) {
          checkQuizAnswer();
        } else {
          document.getElementById('quiz-next-btn').click();
        }
      }
    });
    
    // Next question button
    document.getElementById('quiz-next-btn').addEventListener('click', () => {
      state.quizState.currentQuestionIndex++;
      if (state.quizState.currentQuestionIndex >= state.quizState.filteredItems.length) {
        state.quizState.currentQuestionIndex = 0;
        state.quizState.filteredItems = shuffleArray(state.quizState.filteredItems);
      }
      renderQuizQuestion();
    });
    
    /* ========================================
       INITIALIZATION
       Render the initial view (Browse)
       ======================================== */
    
    renderBrowseTable();
  </script>
</body>
</html>
